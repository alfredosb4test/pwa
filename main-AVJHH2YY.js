import{a as g}from"./chunk-6CEW7SB3.js";import{i as oe}from"./chunk-SWYALDXR.js";import{a as te,b as S,e as re,f as ne}from"./chunk-DDJNJVRK.js";import{n as J,o as R,r as Q,s as X,u as ee}from"./chunk-I6AKDVZX.js";import{D as p,F as G,L as U,Lb as q,R as v,Rb as A,U as d,Y as I,_a as K,aa as V,ba as O,ca as f,cb as Z,dc as z,ea as y,f as j,fc as Y,gc as P,j as E,k as W,n as c,r as x,ra as L,s as M,tb as _,u as T,ub as H,v as C,va as B,vb as $,w as l,x as h,za as k}from"./chunk-QYKYBBAS.js";import{a as F}from"./chunk-JCXCEWRH.js";var ie=()=>{let t=f(g),e=f(S);return t.checkAuthentication().pipe(d(n=>{n&&(console.log("isAuthenticated::",n),e.navigate(["/catalogos"]))}),c(n=>!n))},se=(t,e)=>(console.log("canPubMatchGuard"),console.log({route:t,segments:e}),ie()),ae=(t,e)=>(console.log("canPubActivateGuard"),console.log({route:t,state:e}),ie());var ce=()=>{let t=f(g),e=f(S);return t.checkAuthentication().pipe(d(n=>{console.log("isAuthenticated::",n),n||e.navigate(["/auth/login"])}))},pe=(t,e)=>(console.log("canMatchGuard"),console.log({route:t,segments:e}),ce()),ue=(t,e)=>(console.log("canActivateGuard"),console.log({route:t,state:e}),ce());var he=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=y({type:e,selectors:[["app-error404-page"]],standalone:!0,features:[A],decls:2,vars:0,template:function(o,i){o&1&&(_(0,"p"),q(1,"error404-page works!"),H())},encapsulation:2});let t=e;return t})();var de=[{path:"auth",loadChildren:()=>import("./chunk-EHKT6RTV.js").then(t=>t.routes),canActivate:[se],canMatch:[ae]},{path:"catalogos",loadChildren:()=>import("./chunk-HDNQFQI4.js").then(t=>t.routes),canActivate:[ue],canMatch:[pe]},{path:"",redirectTo:"auth",pathMatch:"full"},{path:"404",component:he},{path:"**",redirectTo:"404"}];var w="Service workers are disabled or not supported by this browser";function we(t){return M(()=>W(new Error(t)))}var m=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=we(w);else{let r=T(e,"controllerchange").pipe(c(()=>e.controller)),o=M(()=>E(e.controller)),i=x(o,r);this.worker=i.pipe(h(u=>!!u)),this.registration=this.worker.pipe(v(()=>e.getRegistration()));let N=T(e,"message").pipe(c(u=>u.data)).pipe(h(u=>u&&u.type)).pipe(U());N.connect(),this.events=N}}postMessage(e,n){return this.worker.pipe(p(1),d(r=>{r.postMessage(F({action:e},n))})).toPromise().then(()=>{})}postMessageWithOperation(e,n,r){let o=this.waitForOperationCompleted(r),i=this.postMessage(e,n);return Promise.all([i,o]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let n;return typeof e=="string"?n=r=>r.type===e:n=r=>e.includes(r.type),this.events.pipe(h(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(p(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(h(n=>n.nonce===e),p(1),c(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},Ee=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,this.pushManager=null,this.subscriptionChanges=new j,!r.isEnabled){this.messages=l,this.notificationClicks=l,this.subscription=l;return}this.messages=this.sw.eventsOfType("PUSH").pipe(c(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(c(i=>i.data)),this.pushManager=this.sw.registration.pipe(c(i=>i.pushManager));let o=this.pushManager.pipe(v(i=>i.getSubscription()));this.subscription=C(o,this.subscriptionChanges)}requestSubscription(r){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(w));let o={userVisibleOnly:!0},i=this.decodeBase64(r.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)a[s]=i.charCodeAt(s);return o.applicationServerKey=a,this.pushManager.pipe(v(s=>s.subscribe(o)),p(1)).toPromise().then(s=>(this.subscriptionChanges.next(s),s))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(w));let r=o=>{if(o===null)throw new Error("Not subscribed to push notifications.");return o.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(p(1),v(r)).toPromise()}decodeBase64(r){return atob(r)}};e.\u0275fac=function(o){return new(o||e)(O(m))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),ye=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,!r.isEnabled){this.versionUpdates=l,this.unrecoverable=l;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(w));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:r},r)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(w));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:r},r)}};e.\u0275fac=function(o){return new(o||e)(O(m))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();var fe=new V("NGSW_REGISTER_SCRIPT");function Ae(t,e,n,r){return()=>{if(!(R(r)&&"serviceWorker"in navigator&&n.enabled!==!1))return;navigator.serviceWorker.addEventListener("controllerchange",()=>{navigator.serviceWorker.controller!==null&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})});let o;if(typeof n.registrationStrategy=="function")o=n.registrationStrategy();else{let[a,...s]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":o=E(null);break;case"registerWithDelay":o=ge(+s[0]||0);break;case"registerWhenStable":o=s[0]?C(me(t),ge(+s[0])):me(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}t.get(Z).runOutsideAngular(()=>o.pipe(p(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function ge(t){return E(null).pipe(G(t))}function me(t){return t.get(Y).isStable.pipe(h(n=>n))}function Se(t,e){return new m(R(e)&&t.enabled!==!1?navigator.serviceWorker:void 0)}var b=class{};function D(t,e={}){return L([Ee,ye,{provide:fe,useValue:t},{provide:b,useValue:e},{provide:m,useFactory:Se,deps:[b,k]},{provide:z,useFactory:Ae,deps:[B,fe,b,k],multi:!0}])}var ve={providers:[re(de,ne()),oe(),Q(X()),D("ngsw-worker.js",{enabled:!P(),registrationStrategy:"registerWhenStable:30000"}),D("ngsw-worker.js",{enabled:!P(),registrationStrategy:"registerWhenStable:30000"})]};var be=(()=>{let e=class e{constructor(r){this.AuthService=r,this.title="webAng17"}ngOnInit(){this.AuthService.checkAuthentication().subscribe(()=>console.log("checkAutenticar"))}};e.\u0275fac=function(o){return new(o||e)(K(g))},e.\u0275cmp=y({type:e,selectors:[["app-root"]],standalone:!0,features:[A],decls:1,vars:0,template:function(o,i){o&1&&$(0,"router-outlet")},dependencies:[J,te]});let t=e;return t})();ee(be,ve).catch(t=>console.error(t));
